% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/pfilter_mvgam_online.R
\name{pfilter_mvgam_online}
\alias{pfilter_mvgam_online}
\title{Automatic online particle filtering for assimilating new observations into a fitted mvgam model}
\usage{
pfilter_mvgam_online(
  data_assim,
  file_path = "pfilter",
  threshold = 0.5,
  use_resampling = FALSE,
  kernel_lambda = 1,
  n_cores = parallel::detectCores() - 1
)
}
\arguments{
\item{data_assim}{A \code{dataframe} or \code{list} of test data containing at least one more observation per series
(beyond the last observation seen by the model when initialising particles with
\code{\link{pfilter_mvgam_init}} or in previous calls to \code{pfilter_mvgam_online}.
Should at least contain 'series' and 'time' for the one-step ahead horizon,
in addition to any other variables included in the linear predictor of \code{object}}

\item{file_path}{\code{character} string specifying the file path for locating the particles}

\item{threshold}{\code{proportional numeric} specifying the Effective Sample Size limit under which
resampling of particles will be triggered (calculated as \code{ESS / n_particles}) if \code{use_resampling == TRUE}.
Should be between \code{0} and \code{1}}

\item{use_resampling}{\code{logical} specifying whether resampling should be used when ESS falls below
the specified \code{threshold}. Default for this option is \code{FALSE}, relying instead on kernel smoothing only
to maintain particle diversity}

\item{kernel_lambda}{\code{proportional numeric} specifying the strength of kernel smoothing to use when
pulling low weight particles toward the high likelihood state space. Should be between \code{0} and \code{1}. Note
however that kernel smoothing is not currently supported for Gaussian Process trend models. For these models,
it is still preferable to use resampling with a reasonable \code{threshold} value (i.e. \code{0.5})}

\item{n_cores}{\code{integer} specifying number of cores for generating particle forecasts in parallel}
}
\value{
A \code{list} object of \code{length = n_particles} containing information on parameters and
current state estimates for each particle is generated and saved, along with other important information
from the original model, to an \code{.rda} object in \code{file_path}
}
\description{
This function operates sequentially on new observations in \code{data_assim} to update the
posterior forecast distribution. It is a wrapper that calls \code{\link{pfilter_mvgam_smooth}}.
In each iteration, the next observation is assimilated
and particles are weighted by their proposal's multivariate composite likelihood
}
