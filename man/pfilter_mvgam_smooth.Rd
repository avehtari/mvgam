% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/pfilter_mvgam_smooth.R
\name{pfilter_mvgam_smooth}
\alias{pfilter_mvgam_smooth}
\title{Assimilate new observations into a fitted mvgam model using resampling and kernel smoothing}
\usage{
pfilter_mvgam_smooth(
  particles,
  mgcv_model,
  next_assim,
  threshold = 0.15,
  n_cores = 2,
  use_resampling = TRUE,
  kernel_lambda = 0.5
)
}
\arguments{
\item{particles}{A \code{list} of particles that have been run up to one observation prior to the observation
in \code{next_assim}}

\item{mgcv_model}{A \code{\link[mgcv]{gam}} model returned through a call to \code{link{mvjagam}}}

\item{next_assim}{A \code{dataframe} of test data containing at one more observation per series
(beyond the last observation seen by the model when initialising particles with
\code{\link{pfilter_mvgam_init}} or in previous calls to \code{pfilter_mvgam_online}.
Should at least contain 'series', 'season', 'year' and in_season' for the one-step ahead horizon,
in addition to any other variables included in the linear predictor of \code{object}}

\item{threshold}{\code{proportional numeric} specifying the Effective Sample Size limit under which
resampling of particles will be triggered (calculated as \code{ESS / n_particles}).
Should be between \code{0} and \code{1}}

\item{n_cores}{\code{integer} specifying number of cores for generating particle forecasts in parallel}

\item{use_resampling}{\code{logical} specifying whether resampling should be used when ESS falls below
the specified \code{threshold}}

\item{kernel_lambda}{\code{proportional numeric} specifying the strength of kernel smoothing to use when
pulling low weight particles toward the high likelihood state space. Should be between \code{0} and \code{1}}

\item{file_path}{\code{character} string specifying the file path for locating the particles}
}
\description{
This function operates on a new observatio in \code{next_assim} to update the
posterior forecast distribution. The next observation is assimilated
and particles weights are updated in light of their most recent their  multivariate composite likelihood.
Low weight particles are smoothed towards the high weight state space using kernel smoothing, and options are
given for using resampling of high weight particles when Effective Sample Size falls below a
user-specified threshold
}
